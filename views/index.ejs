<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>News Intel Dashboard</title>
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <div class="bg-blur bg-blur-a"></div>
    <div class="bg-blur bg-blur-b"></div>

    <header class="top glass">
      <div>
        <h1>News Intel Dashboard</h1>
        <p class="sub">移动端优先 · 毛玻璃风格 · 中文标题聚合</p>
      </div>
      <div class="actions">
        <a class="btn" href="/?refresh=1">刷新全部</a>
      </div>
    </header>

    <nav class="anchors glass">
      <% categories.forEach((cat) => { %>
      <a href="#<%= cat.id %>"><%= cat.zhName || cat.name %></a>
      <% }) %>
    </nav>

    <main>
      <% categories.forEach((cat) => { %>
      <section class="panel glass" id="<%= cat.id %>">
        <div class="panel-head">
          <div>
            <h2><%= cat.zhName || cat.name %></h2>
            <p class="desc"><%= cat.zhDescription || cat.description %></p>
          </div>
          <div class="meta-wrap">
            <span class="count"><%= cat.items.length %> 条</span>
            <span class="meta"><%= new Date(cat.updatedAt).toLocaleString('zh-CN') %></span>
          </div>
        </div>

        <ul class="items">
          <% cat.items.forEach((item) => { %>
          <li class="item <%= item.error ? 'error' : '' %>">
            <a class="title" href="<%= item.link %>" target="_blank" rel="noreferrer"><%= item.titleZh || item.title %></a>
            <div class="row">
              <span>来源：<%= item.source %></span>
              <% if (item.publishedAt) { %>
              <span><%= new Date(item.publishedAt).toLocaleString('zh-CN') %></span>
              <% } else { %>
              <span>时间未知</span>
              <% } %>
            </div>
          </li>
          <% }) %>
        </ul>
      </section>
      <% }) %>
    </main>

    <footer>页面生成时间：<%= generatedAt.toLocaleString('zh-CN') %></footer>
  </body>
</html>
